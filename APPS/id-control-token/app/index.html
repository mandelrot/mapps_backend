<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.4.5/spectre.min.css">
  <title>ID control via token</title>
</head>
<body style="padding: 40px;">

  <h2>ID control via token</h2>

  <p>The v2 Mandelrot Apps engine includes a built-in system to do validations (typical usecase: users) before even redirecting the frontend requests to their targeted apps. See the "08 - ID control - Validator" app for more details. </p>

  <p>
    These are the steps needed to do that:
  </p>

  <p style="margin-left: 15px;">1) The backend engine recognizes whether one of more of your apps can do the validations (has a special module called "idcontrol.js". If so, those apps will be displayed in a dropdown list at the admin window.</p>
  <p style="margin-left: 15px;">2) In case they want, the admin will select one of those id-control capable apps to check the requester identity.</p>

  <div style="margin: 25px 0; text-align:center;">
    <img style="border: 1px solid black;" src="/id-control-token/images/1-idcontrolapp.png">
  </div>

  <p style="margin-left: 15px;">3) If any ID control app is selected, the admin can set exceptions to that control. The apps marked as exception will not be controlled (the requests coming from them will not have any id/token check). When running this example please be sure at least this app (number 07) is NOT checked, so you can see how the ID control is made.</p>

  <div style="margin: 25px 0; text-align:center;">
    <img style="border: 1px solid black;" src="/id-control-token/images/2-exceptions.png">
  </div>

  <p style="margin-left: 15px;">4) The changes will be stablished with the confirmation button at the bottom of the admin window, and since that moment the whole system will work with those settings.</p>


  <hr style="margin: 50px 0;">

  <h3 style="margin-bottom: 40px;">Let's test it</h3>


  <p>Press the button to send a request without token (or it would be the same with an invalid token). If the admin settings are stablished as listed above the request will fail, otherwise the text below the button will show the backend response even without any proper identification.</p>
  <button onclick="sendWithoutToken()">Send without token</button><br/>
  <pspan id="responseWithoutToken">The backend response will be displayed here (if the ID control settings are correctly activated it should be an ID failure response).</pspan>

  <br/><br/>

  <p>Press the button to send a request with a valid token. It should always work, as long as you don't remove the validation app from the frontend "APPS" folder.</p>
  <button onclick="sendWithToken()">Send with a valid token</button><br/>
  <span id="responseWithToken">The response from the targeted app will be displayed here.</span>


  




  <script src="/id-control-token/socket.io.min.js"></script>
  <script src="/id-control-token/backend-static/serverport.js"></script> <!-- file self-generated by the backend -->
  <script src="/id-control-token/index.js"></script>



</body>
</html>